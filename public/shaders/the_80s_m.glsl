precision highp float;uniform sampler2D iChannel0;uniform vec2 resolution;uniform vec4 date;uniform float time,alpha;const vec2 A=vec2(12.9898,78.233);mat2 j(in float a){return mat2(cos(a),-sin(a),sin(a),cos(a));}float m(in vec2 a){return fract(sin(dot(a.xy,A))*43758.545312);}float B(in vec2 c){const vec2 b=vec2(0.,1.);vec2 a=floor(c);return mix(mix(m(a),m(a+b.yx),.5),mix(m(a+b),m(a+b.yy),.5),.5);}vec2 w(in vec2 a,in float b){b=fract((b-.5)*2.),a=b>.75?vec2(1.)-a:b>.5?vec2(1.-a.x,a.y):b>.25?1.-vec2(1.-a.x,a.y):a;return a;}float C(in vec2 a){a=vec2(atan(a.x,a.y)/3.141593*4.,log(length(a)+1.)*8.),a.x+=time*.5,a.y-=a.x*.5+time*1.;vec2 b=fract(a)*1.5-.5;return max(b.x-a.x,b.y);}float D(in vec2 a,in float c){float d=time*-.5;a.y+=d;float b=sin(a.y-c*2.*3.141593+4.712389)*.5+.5;b+=sin(a.x*10.-a.y*4.-time*2.)*.333333*.1;return b;}float E(in vec2 b){b*=16.,b*=j(time*.3),b.x+=time*.25;vec2 c=floor(b),d=fract(b),a=w(d,m(c));float e=smoothstep(a.x-.2,a.x,a.y)-smoothstep(a.x,a.x+.2,a.y);return e;}float F(in vec2 a){a*=8.,a*=j(time*.2);vec2 c=floor(a),d=fract(a),b=w(d,m(c));float e=step(length(b),.55)-step(length(b),.45)+(step(length(b-vec2(1.)),.55)-step(length(b-vec2(1.)),.45));return e;}float G(in vec2 a){a.y+=1.5;float e=0.,b,c;for(int d=0;d<6;d++)b=float(d),c=160.-b*16.,e+=step(.2,pow(B(mod(vec2(a.x*c+time*-80.-b*50.,a.y*c),resolution.x)),16.));return e;}float H(in vec2 g){float c=-time*1.5,b,a,d=0.;for(float e=0.;e<8.;e+=2.){b=mod(c+e,8.),a=b*b;vec2 f=floor(mod((g+vec2(sin(-c*1.570796),cos(c*1.570796))/a)*a,2.));a=f.x+f.y-1.,d=max(d,a*a/b)*1.1;}return d;}float x(in vec2 a){a.y*=max(resolution.x,resolution.y)/min(resolution.x,resolution.y);float f=time*.2,e=time*.5;a*=vec2(80.,24.),a=ceil(a),a/=vec2(80.,24.);float b=0.;b+=.7*sin(.5*a.x+f),b+=3.*sin(1.6*a.y+f),b+=1.*sin(10.*(a.y*sin(e)+a.x*cos(f))+e);float c=a.x+.5*sin(e),d=a.y+.5*cos(e*.5);b+=.4*sin(sqrt(100.*c*c+100.*d*d+1.)+time),b+=.9*sin(sqrt(75.*c*c+25.*d*d+1.)+time),b+=-1.4*sin(sqrt(256.*c*c+25.*d*d+1.)+time),b+=.3*sin(.5*a.y+a.x+sin(time));return 3.*(.5+.499*sin(b))*.333333;}float I(in vec2 a){a*=.75,a.x*=1.5,a.x+=.5;float d=time;vec2 b;b.x=mod(d/1.7,1.88)+.03,b.y=mod(d/2.5,1.08)-.27,b=min(b,vec2(1.94,.54)-b);float c=smoothstep(1.,.9,70.*distance(a,b)),e=mix(b.y,sin(d*3.1)*.2,b.x),f=mix(cos(d*3.7)/4.5,b.y*.9,b.x);a.x<.04&&abs(e-a.y)<.06||a.x>.96&&abs(f-a.y)<.06?c+=1.:0.,a.x<1e-3||a.x>.999||a.y<-.27||a.y>.27?c+=1.:0.,c=a.x<-.02||a.x>1.02||a.y<-.29||a.y>.29?0.:c;return c;}float J(in vec2 b){vec2 f=b/2.,a=b-f;a=vec2(a.x*abs(1./a.y),abs(.75/a.y)+mod(time,1.)),a.y=clamp(a.y,-10.,10.);vec2 c=vec2(.5),d=mod(a,vec2(1.));float g=max(abs(c-d).x,abs(c-d).y),e=2.*g,h=max(e*.25,smoothstep(.5,.99,e));return h;}float K(in vec2 a){a.y=abs(a.y),a.y=max(.08,a.y),a.x/=a.y,a.x+=time;float b=mod(floor(a.x)+floor(a.y*2.),2.)+.5,c=sqrt(a.y);b=b*max(.1,min(1.,c*1.3));return b;}float L(in vec2 b){float f=time*1.2,g=time*.6,a=resolution.y/50.,e=resolution.x,h=a*.25,c=length(b);c+=.2*(sin(b.y*.25/a+f)*sin(b.x*.25/a))*a*5.,c+=.3*sin(g)+.1*(cos(b.x*.45/a)*cos(b.x*1.35/a))*a;float d=mod(c+e/128.,e/64.);d=abs(d-e/128.),d=clamp(d-h,0.,1.),c+=d;float i=fract((c-1.)*16.*.5);return i;}float M(in vec2 a){a.x+=time*.2+(3.+sin(time)*.25);float b=sin(a.x*14.+time*1.2)/4.,c=abs(a.y-b)*4.;b+=cos(a.x*18.+time)/8.,c*=abs(a.y-b)*18.*.25;float d=.25/c;return 1.-d;}float N(in vec2 a){a*=5.;float n=20.+abs(sin(time*.5))*150.,e=1.5/resolution.y*n*.5;vec2 o=floor(a);a=fract(a)-.5;float f=time,g=mod(floor(f/1.570796),2.),h=0.;for(float b=-1.;b<=1.;b++)for(float c=-1.;c<=1.;c++){vec2 i=a+vec2(c,b),p=o+vec2(c,b);i*=mat2(cos(f+vec4(0.,33.,11.,0.)));vec2 k=smoothstep(.5+e,.5-e,abs(i));float q=k.x*k.y;vec2 d=mod(p,2.);float r=abs(d.x*d.y+(1.-d.x)*(1.-d.y)-g);h+=q*r;}return abs(h-g);}float O(in vec2 a,in float f){float c=0.;a*=4.;vec2 b=vec2(6.7-f*12.,0.),e=a-b;float g=abs(atan(e.y,-e.x)),h=step(max(0.,sin(time*10.)*.4+.35),g),i=distance(a,b);c+=max(0.,20.-i*20.)*h;if(a.x>b.x+.5)return c;a.y+=sin(5.*time+a.x*.5)*.15;vec2 d=vec2(floor(a.x)+.5,0.);a.x<b.x-.95?c+=max(0.,6.-distance(a,d)*30.)*1.5-distance(b,d):0.,a.x<b.x-.9?c+=max(0.,6.-distance(a,d)*30.)*.6:a.x<b.x-.6?c+=max(0.,6.-distance(a,d)*30.)*.3:a.x<b.x-.3?c+=max(0.,6.-distance(a,d)*30.)*.15:a.x<b.x+.25?c+=max(0.,6.-distance(a,d)*30.)*.07:0.;return c;}float P(in vec3 a,in float c,in float d){float b=1.,e=sin(d*2.)*.3+.7,f=distance(.98,a.z),g=1.-smoothstep(0.,.1,f);b=a.z>.99+smoothstep(0.,.7,c)*9e-3?0.:a.z>.9?.7*g*e:b;return b;}float Q(in vec2 b,in float i){b*=1.5;float c=length(b);if(c>1.)return 0.;else{vec3 d=normalize(vec3(1.,1.,2.)),a=vec3(b,sqrt(1.-c*c));float f=cos(time*.02914)*15.115;mat2 g=j(f),h=j(sin(time*.447)*.117);d.xy*=g,a.xy*=g,d.xz*=h,a.xz*=h;float e=dot(d,a),k=atan(a.x,a.y)-f;return (e*.5+e*e*.3+.3)*P(a,i,k);}}float t(const in vec2 a,const in vec4 b){vec2 d=step(b.xy,a.xy),e=step(a.xy,b.zw),c=d*e;return c.x*c.y;}float s(const in float b,const in vec2 e){vec4 a=vec4(0.),c=vec4(0.),d=vec4(0.);b<.5?(a=vec4(0.,0.,.75,1.),c=vec4(.25,.2,.5,.8)):b<1.5?(a=vec4(.25,0.,.5,1.),c=vec4(0.,0.,0.,0.)):b<2.5?(a=vec4(0.,0.,.75,1.),c=vec4(0.,.6,.5,.8),d=vec4(.25,.2,.75,.4)):b<3.5?(a=vec4(0.,0.,.75,1.),c=vec4(0.,.6,.5,.8),d=vec4(0.,.2,.5,.4)):b<4.5?(a=vec4(0.,.2,.5,1.),c=vec4(.25,.4,.5,1.),d=vec4(.5,0.,.75,.6)):b<5.5?(a=vec4(0.,0.,.75,1.),c=vec4(.25,.6,.75,.8),d=vec4(0.,.2,.5,.4)):b<6.5?(a=vec4(0.,0.,.75,1.),c=vec4(.25,.6,.75,.8),d=vec4(.25,.2,.5,.4)):b<7.5?(a=vec4(0.,0.,.75,1.),c=vec4(0.,0.,.5,.8)):b<8.5?(a=vec4(0.,0.,.75,1.),c=vec4(.25,.2,.5,.4),d=vec4(.25,.6,.5,.8)):b<9.5?(a=vec4(0.,0.,.75,1.),c=vec4(.25,.6,.5,.8),d=vec4(0.,.2,.5,.4)):a=b<10.5?vec4(.25,0.,.5,.2):b<11.5?vec4(0.,.4,.75,.6):a;float f=t(e,a)+t(e,c)+t(e,d);return mod(f,2.);}float R(in vec2 a){float c=0.,e=0.,g=length(a);c+=smoothstep(.7,.8,g)*(1.-smoothstep(.8,.9,g));vec2 f=a;a*=j(floor(mod(date.w,60.))/60.*2.*3.141593),e=a.x<.02&&a.x>-.02&&a.y>-.05&&a.y<.7?1.:e,c+=e,a=f,a.y+=.2,a.x-=.03;float h=mod(date.w/60.,60.),d=mod(date.w/3600.,24.);d>13.?d-=12.:0.,a.y*=.7,a.x+=.7;float b=0.;d>=10.?b+=s(floor(d/10.),a*3.3):0.,a.x-=.3,b+=s(floor(mod(d,10.)),a*3.3),f=a,a.y=-a.y+.22,a.x=-a.x+.44,c=b*.5+c*(.5+.5*(1.-b)),a=f,a.x-=.5,b=s(floor(h/10.),a*3.3),a.x-=.3,b+=s(floor(mod(h,10.)),a*3.3),c=b*.5+c*(1.-.5*b);return c;}float l(in vec3 d,in vec3 b,in vec3 e){vec3 c=d-b,a=e-b;float f=clamp(dot(c,a)/dot(a,a),0.,1.);return length(c-a*f)-1.;}vec3 S(in vec3 a,in vec3 b,in vec3 c,in vec3 d){return normalize(vec3(l(a+d.yxx,b,c)-l(a-d.yxx,b,c),l(a+d.xyx,b,c)-l(a-d.xyx,b,c),l(a+d.xxy,b,c)-l(a-d.xxy,b,c)));}float T(in vec3 a){return a.x>.2?.435:a.x<-.2?.65:.9;}float U(in vec2 q){const vec3 r=vec3(0.,1e-3,0.),f=vec3(1.5,0.,0.),g=vec3(-1.5,0.,0.);vec3 b=normalize(vec3(q*.7,1.)),a=vec3(0.,0.,1.);mat2 h=j(time*.235+.5),i=j(time*.412-.7);b.xy*=h,a.xy*=h,b.zx*=i,a.zx*=i;vec3 u=normalize(-a),v=-a*5.;bool k=false;float n=0.,c=99999.9,o=.25;for(int p=0;p<30;p++){vec3 d=v+n*b;float e=l(d,f,g);c=min(c,e),n+=e;if(e<.04){o=(dot(S(d,f,g,r),u)*.5+.5)*T(d),k=true;break;}}return !k&&c<.25?0.:o;}float V(in vec2 a){a*=1.5,a.x+=sin(16.18034*a.y+time)*1.618034*.01,a.y+=sin(16.18034*a.x+time)*1.618034*.01;float c=atan(a.y/a.x)*10.,b=.05/abs(length(a)-1.+sin(c+time*3.)*1.618034*.333333*.1);b=sqrt(b*b*b),a*=2.02,c=atan(a.y/a.x)*10.,b+=.05/abs(length(a)-1.+sin(c+time*4.)*1.618034*.333333*.1);return b;}float W(){vec2 c=resolution,a=gl_FragCoord.xy-c/2.;a=vec2(length(a)/c.y-.2,atan(a.y,a.x));vec4 b=.08*cos(1.5*vec4(0,1,2,3)+time+a.y+sin(a.y)*cos(time)),e=b.yzwx,f=max(a.x-b,e-a.x),d=dot(clamp(f*c.y,0.,1.),72.*(b-e))*(b-.1)+f;float g=sqrt(d.x+d.y+d.z)/1.3;return 2.-inversesqrt(g*g*.5);}float X(){float b=time*.5;vec2 d=gl_FragCoord.xy,c=gl_FragCoord.xy,a=6.*d/resolution.y;a.x-=b,c=floor(a);float e=sign(mod(a.y,2.)-1.);a.y=dot(cos(2.*(b+c.x)*1.5*max(0.,.5-length(a=fract(a)-.5))-vec2(99.,0)),a);return smoothstep(-1.,10.,e*a/.017).y;}float Y(in vec2 b){b.x/=max(resolution.x,resolution.y)/min(resolution.x,resolution.y)-.75,b=floor(256.*b)/512.;vec2 a=16.*vec2(length(b),length(b*b));float c=-time*2.,d=.7*smoothstep(0.,.5,sin((a.x-a.y)*8.+c*1.)*3.+2.-a.y),f=.5*smoothstep(0.,.5,sin((a.x-a.y)*8.+c*1.25)*3.+2.-a.y),e=.5*smoothstep(0.,.5,sin((a.x-a.y)*8.+c*1.5)*3.+2.-a.y);return d+f*e+d*e;}float Z(in float a,in float b,in float c){return (abs(a*2.-1.)-c)*b;}float _(){vec2 b=resolution.xy,a=(gl_FragCoord.xy-.5*b)/b.y+.5;float c=length(a-vec2(.5+sin(time)*.0025,.5+cos(time)*.0025)),d=Z(fract((a.y+time/12.)*20.),.333333,.5)-(-a.y+.3)*.7,e=smoothstep(0.,-.015,max(c-.315,-d))-.2;return e+.1;}float aa(){vec2 d=resolution.xy,a=vec2(gl_FragCoord.xy-.5*d.xy)/d.y;float b=time*.75;vec3 c=vec3(1.);float f=2.*mod(floor(a.y*10.),2.)-1.,g=2.*mod(floor(a.x*10.),2.)-1.,h=mod(floor(b),2.),i=mod(floor(b+1.),2.);a.x+=b*f*.1*h,a.y+=b*g*.1*i;vec2 e=floor(a*10.);c*=mod(e.x-e.y,2.);return sqrt(c.x+(1.-c.x)*.5);}float ba(in vec3 a){a.xz*=j(time*3.141593/5.5),a.xy*=j(time*3.141593/5.5);vec3 b=abs(a);float c=max(b.x,max(b.y,b.z))-.5;return c;}vec3 ca(in vec3 b,in vec3 c){float a=0.;for(int d=0;d<36;d++){vec3 e=b+c*a;float f=ba(e);a+=f*.5;}vec3 g=b+c*a;return vec3(g*-.6+a*.2);}float da(){vec2 b=(gl_FragCoord.xy*2.-resolution.xy)/resolution.y;vec3 c=vec3(0.,0.,-1.8),a=normalize(vec3(b,1.5)),d=ca(c,a);return dot(a,d.xyz)*1.1;}float y(in int a,in vec2 b,in float c){int d=int(26.)-1;a=int(fract(float(a)*1.61456)*26.);int f=a/d;a-=f*d;float e=0.;e=a==0?D(b,c):a==1?J(b):a==2?F(b):a==3?O(b,c):a==4?R(b):a==5?E(b):a==6?x(b):a==7?Q(b,c):a==8?U(b):a==9?H(b):a==10?G(b):a==11?C(b):a==12?I(b):a==13?K(b):a==14?L(b):a==15?M(b):a==16?N(b):a==17?V(b):a==18?W():a==19?X():a==20?Y(b):a==21?_():a==22?aa():a==23?da():x(b);return e;}float ea(in vec2 b,in float a){int c=int(time/a);float d=mod(time,a)/a,e=y(c,b,0.),f=y(c-1,b,d);return mix(f,e,smoothstep(.666667,1.,d));}float fa(in vec2 e,in float d,in float h,in float i){vec2 f=floor((e+2.)/d)*d*1.-resolution.xy;f/=resolution.y;float a=ea(f,i);if(a<.2)return 0.;vec2 g=floor(mod(e.xy/d,h));int b=int(g.x),c=int(g.y);return b==0||c==0?0.:a>.8?1.:b==1&&c==2&&a>.6||b==1&&c==1&&a>.4||b==2&&c==2&&a>.2?1.:0.;}float z(in int b,in vec2 c,in float la){vec2 d=vec2(c.x+sin(4.*c.y+time*2.)*.05,c.y+cos(2.*c.x+time)*.05);int e=int(13.)-1;b=int(fract(float(b)*1.61456)*13.);int g=b/e;b-=g*e;vec2 a=abs(c);float f=0.,h=.75-(a.x+a.y-min(a.x,a.y)-min(a.x,a.y)),i=max(.8-(a.x+sin(a.y*1.25+time)*.1+a.y-min(a.x,a.y)),0.)-.1,k=.6-(a.x+a.y-min(a.x,a.y)-(min(a.x,a.y)+sin(abs(a.y)+time)*.2)),n=max(.5-(abs(c*j(time)).x+abs(c*j(time)).y-min(abs(c*j(time)).x,abs(c*j(time)).y)-.2-min(a.x,a.y)*.25),0.)*1.5,o=max(.9-(min(a.x,a.y)+(a.x+a.y-min(a.x,a.y))),0.),p=-(max(.4-min(a.x,a.y),0.)-max(.8-(a.x+a.y-min(a.x,a.y)),0.)),q=-(max(.25-min(abs(d).x,abs(d).y),0.)-max(.8-(abs(d).x+abs(d).y-min(a.x,a.y)),0.)),r=min(max(.8-(abs(d).x+a.y-min(abs(d).x,a.y)),0.)*2.,max(.5-min(abs(d).x,abs(d).y),0.)*2.),u=max(.7-(a.x+a.y-min(a.x,a.y)-.5*min(a.x,a.y)*(a.x+a.y-min(a.x,a.y))*1.5),0.)*1.,v=max(.9-(a.x+a.y-min(a.x,a.y)-.5*min(a.x,a.y)*-(a.x+a.y-min(a.x,a.y))*1.5),0.)*1.,ga=.8-length(vec2(a.x*.8,a.y*1.2)),ha=1.-length(a*1.2),ia=.7-length(vec2(c.x*cos(.2*c.y+time*.5),c.y*sin(c.y+time*.5)*.125)*1.2),ja=.8-length(vec2(a.x*.8,a.y*1.2))*(a.x+a.y-min(a.x,a.y));f=b==0?h:b==1?i:b==2?k:b==3?n:b==4?o:b==5?p:b==6?q:b==7?r:b==8?u:b==9?v:b==10?ga:b==11?ha:b==12?ia:ja;return f;}float ka(in vec2 c,in float b){int d=int(time/b);float a=mod(time,b)/b,f=z(d,c,a),e=z(d-1,c,a),g=mix(e,f,smoothstep(.6,1.,a));return mix(e,g,smoothstep(.8,1.,a));}void main(){vec2 a=gl_FragCoord.xy/resolution.xy,f=gl_FragCoord.xy*2.,e=floor((gl_FragCoord.xy*2.+2.)/8.)*8.*1.-resolution.xy;e/=resolution.y;float b=fa(f,2.,4.,6.),d=ka(e,6.);if(d>0.){float c=0.;c=d<.02?.25*b*.125:d<.05?0.:b,gl_FragColor=vec4(vec3(c*.025,c,c*.025)*.25,alpha);}else{a.y<.5?a.y=1.-a.y:0.,a.x<.5?a.x=1.-a.x:0.;vec4 g=texture2D(iChannel0,a);vec3 h=vec3(b*5e-3,b*.01,b*5e-3)*.02;gl_FragColor=vec4(vec3(sqrt(g.rgb)+h),alpha);}gl_FragColor=sqrt(sqrt(gl_FragColor));}